# Hasura Backend

## Installation
1. Copy `.env.example` to `.env` within `apps/api/external`
2. `make docker-start` within `apps/api/external`
3. `nx serve-api-external serve` from workspace root

> or if you want to reset schema & seed data, run `nx serve-api-external serve --args="--reset"`, exit that command, then run the default without reset

## Explore
1. Navigate to `http://localhost:8080` - this is your Hasura GUI
2. Visit `http://localhost:3333/graphql` for GraphQL playground

<!-- 8. Navigate to http://localhost:8080/console/data/schema/public You will see 2 tables (food, restaurant) in `Untracked tables or views`.
  - tracked tables is what will generate GraphQL Resolvers. We can either manually track them by clicking `track all` or by importing the Hasura metadata JSON file. If you choose to manually track these tables, you have to click on each table and click on `Relationships` tab and define object relationships. Those are needed for GraphQL queries to get all foods that belong to a particular restaurant. Those are essentially GraphQL resolvers for relationships
9. Navigate to http://localhost:8080/console/settings/metadata-actions and click `Import metadata` and select the file
at `apps/api/external/hasura_metadata.json`
10. run `nx serve api-external`. This will fetch remote Hasura GraphQL Schema and merge it with the local GraphQL Schema
11. Navigate to http://localhost:3333/graphql and click on `Schema`. Under
    ```type Query {
      ping: String!
      food(
        distinct_on: [food_select_column!]
        limit: Int
        offset: Int
        order_by: [food_order_by!]
        where: food_bool_exp
      ): [food!]!
      }```
12. `ping` Query is located in `health.resolver.ts` - this is our local query using code-first approach.
`food` query is generated by Hasura and is stitched together on server start -->
