fragment RootAppPageElement on page_element {
    id
    name
    component {
        id
        label
        elements {
            id
            label
            atom {
                id
                type
            }
        }
        links {
            id
            order
            props
            source_element_id
            target_element_id
        }
    }
    props {
        prop {
            id
        }
    }
}

fragment RootAppPageLink on page_links {
    id
    order
    props
    source_element_id
    target_element_id
}

query RootApp($appId: uuid!, $pageId: uuid!) {
    app_by_pk(id: $appId) {
        id
        name
        pages {
            id
            name
        }
    }
    page_by_pk(id: $pageId) {
        id
        name
        elements {
            ...RootAppPageElement
        }
        links {
            ...RootAppPageLink
        }
    }
}