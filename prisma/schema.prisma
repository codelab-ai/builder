// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  // Override via Client & CLI env
  url      = env("PRISMA_DATABASE_URL")
  // url      = env("TEST_PRISMA_DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id       String @id @default(uuid())
  password String
  email    String @unique
  apps     App[]
}

model App {
  id     String  @id @default(uuid())
  title  String
  user   User    @relation(fields: [userId], references: [id])
  userId String
  pages  Page[]
  graphs Graph[]
}

model Page {
  id     String  @id @default(uuid())
  title  String
  app    App     @relation(fields: [appId], references: [id])
  appId  String
  graphs Graph[]
}

model Graph {
  id       String     @id @default(uuid())
  label    String
  type     GraphType? @default(Component)
  vertices Vertex[]
  edges    Edge[]
  app      App?       @relation(fields: [appId], references: [id])
  appId    String?
  page     Page?      @relation(fields: [pageId], references: [id])
  pageId   String?
}

model Vertex {
  id      String      @id @default(uuid())
  type    VertexType?
  graph   Graph?      @relation(fields: [graphId], references: [id])
  graphId String?
}

model Edge {
  id      String    @id @default(uuid())
  type    EdgeType? @default(Vertex)
  graph   Graph?    @relation(fields: [graphId], references: [id])
  graphId String?
}

enum VertexType {
  React_Grid_Layout_Container
  React_Grid
  React_ResponsiveGrid
}

enum EdgeType {
  Vertex
  Graph
}

enum GraphType {
  Layout
  Component
}
